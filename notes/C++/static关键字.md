---
created: '2025-10-19'
last_reviewed: '2025-10-19'
next_review: '2025-10-19'
review_count: 0
difficulty: medium
mastery_level: 0.0
tags:
- C++
- C++/static关键字.md
related_outlines: []
---

# static关键字

### 面试标准总结

“`static` 关键字有四大用法：

1. 修饰局部变量：生命周期延长为整个程序，作用域仍在函数内，只初始化一次。
2. 修饰全局变量：限制作用域为当前文件，避免外部链接冲突。
3. 修饰普通函数：同样限制链接属性，使函数只在本文件可见。
4. 修饰类成员：静态成员变量属于类而非对象，所有对象共享一份；静态成员函数也属于类，可以不依赖对象调用，但不能访问非静态成员，因为没有 `this` 指针。”

---

### 1. `static` 修饰普通局部变量

```cpp
void foo() {
    static int x = 0;
    x++;
    printf("%d\n", x);
}
```

* 位置：存放在 **静态存储区**（已初始化的在 data 段，未初始化的在 bss 段）。
* 生命周期：整个程序运行期间存在。
* 作用域：只在定义它的那个函数里可见。
* 特点：只初始化一次，多次调用函数时值会被保留。

---

### 2. `static` 修饰全局变量

```cpp
static int g = 0;
```

* 生命周期：整个程序运行期间。
* 作用域：仅限于**当前文件**（内部链接属性）。
* 用途：隐藏变量，避免命名冲突。

---

### 3. `static` 修饰函数（非成员函数）

```cpp
static void helper() { /* ... */ }
```

* 生命周期：整个程序。
* 作用域：仅限当前文件可见。
* 用途：和静态全局变量一样，控制链接属性（内部链接）。

---

### 4. `static` 修饰类成员变量

```cpp
struct Foo {
    static int count;
};
int Foo::count = 0; // 定义与初始化
```

* 属于类本身，不属于任何对象。
* 内存中只有一份拷贝，存放在静态存储区。
* 所有对象共享这一份。

---

### 5. `static` 修饰类成员函数

```cpp
struct Foo {
    static void showCount() {
        std::cout << count; // ✅ 可以访问静态成员变量
        // std::cout << x;  // ❌ 不能访问非静态成员
    }
    static int count;
    int x;
};
```

* 不依赖具体对象，可以通过 `Foo::showCount()` 调用。
* 不能访问非静态成员，因为没有 `this` 指针。
* 常用于操作类的静态成员变量。

---

---

## 相关笔记
<!-- 自动生成 -->

- [静态局部变量，全局变量，局部变量](notes/C++/静态局部变量，全局变量，局部变量.md) - 相似度: 36% | 标签: C++, C++/静态局部变量，全局变量，局部变量.md

