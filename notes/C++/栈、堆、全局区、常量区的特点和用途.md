# 栈、堆、全局区、常量区的特点和用途

### 面试时的简洁总结

“一个典型 C/C++ 程序的内存布局包括：

* **代码段**：存放程序的机器指令，只读可执行。
* **全局/静态区**：存放全局变量和静态变量，已初始化的在 data 段，未初始化的在 bss 段。
* **常量区**：存放字符串字面值和常量，只读。
* **堆**：程序员手动申请和释放，用于动态分配，向高地址增长。
* **栈**：编译器自动管理，用于局部变量和函数调用，向低地址增长。

堆和栈一上一下，相对生长。”

---

### 程序内存布局（从高地址到低地址）

1. **栈（Stack）**

   * 存放：函数调用相关数据（返回地址、参数、局部变量）。
   * 特点：由编译器自动分配和释放，先进后出（LIFO），空间通常有限。
   * 增长方向：向下（从高地址向低地址生长）。

2. **堆（Heap）**

   * 存放：动态分配的内存（`malloc/new` 申请，`free/delete` 释放）。
   * 特点：由程序员手动管理，大小取决于系统和可用内存。
   * 增长方向：向上（从低地址向高地址生长），和栈相对生长。

3. **全局区 / 静态存储区（Data Segment）**

   * 分为两部分：

     * **已初始化数据段（.data）**：存放已初始化的全局变量和静态变量。
     * **未初始化数据段（.bss）**：存放未初始化的全局变量和静态变量，程序运行时会被系统清零。
   * 生命周期：随程序始终存在。

4. **常量区（RO Data Segment）**

   * 存放：常量数据，比如字符串字面量 `"hello"`，以及某些 `const` 修饰的全局常量。
   * 特点：只读，试图修改会导致段错误。

5. **代码段（Text Segment）**

   * 存放：程序的机器指令（编译生成的二进制代码）。
   * 特点：只读，有时还带执行权限，防止代码被篡改。

---
