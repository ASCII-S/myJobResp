---
created: '2025-10-19'
last_reviewed: null
next_review: '2025-10-19'
review_count: 0
difficulty: medium
mastery_level: 0.0
tags:
- C++
- C++/通用引用.md
related_outlines: []
---
### 定义

**通用引用** 是指：当我们在模板代码里用 `T&&` 这种形式声明参数时，编译器会根据传入实参的值类别（左值 / 右值）来进行**引用折叠**，从而让同一个函数模板同时接受左值和右值。

换句话说：

* 如果传入左值，`T` 推导为 `X&`，那么 `T&&` 就会折叠成 `X& &&`，即 **`X&`**（左值引用）。
* 如果传入右值，`T` 推导为 `X`，那么 `T&&` 就是 **`X&&`**（右值引用）。

---

### 举例

```cpp
template<typename T>
void func(T&& arg) {
    // arg 的类型取决于实参
}

int x = 10;
func(x);        // T = int& → arg 类型是 int&  (左值引用)
func(10);       // T = int  → arg 类型是 int&& (右值引用)
```

同一个 `func` 模板，可以同时接受左值和右值，这就是所谓的“通用引用”。

---

### 注意事项

1. **通用引用不是新的语法**，它只是 `T&&` 在模板类型推导下出现的一种特殊行为。
2. **普通函数参数里的 `T&&` 并不是通用引用**，它就是单纯的右值引用。

   ```cpp
   void g(int&& x);   // 这里就是右值引用，不是通用引用
   ```
3. 通用引用常用于**完美转发**：

   ```cpp
   template<typename T>
   void wrapper(T&& arg) {
       target(std::forward<T>(arg)); // 保留实参的左值/右值属性
   }
   ```

---

一句话总结：
通用引用 = 模板推导场景下的 `T&&`，它既能绑定左值也能绑定右值，是完美转发的基础。

---

## 相关笔记
<!-- 自动生成 -->

暂无相关笔记

