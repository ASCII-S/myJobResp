---
created: '2025-10-19'
last_reviewed: null
next_review: '2025-10-19'
review_count: 0
difficulty: medium
mastery_level: 0.0
tags:
- C++
- C++/join()和detach()的区别和使用场景.md
related_outlines: []
---
### join

* **作用**：阻塞当前调用线程，等待子线程执行完毕，并收回它的系统资源（线程句柄）。
* **特征**：

  * 调用一次后，`std::thread` 对象不再 joinable。
  * 子线程结束前，当前线程会停在这里。
* **典型场景**：

  * 主线程要等子线程结果：比如并行计算后合并结果。
  * 确保所有工作线程完成再退出程序。

---

### detach

* **作用**：把子线程从 `std::thread` 对象分离，让它在后台独立运行，系统自动在结束时回收资源。
* **特征**：

  * 调用后 `std::thread` 对象立即失去关联。
  * 主线程无法再等待、无法获取返回值。
  * 存在风险：如果主线程先退出，后台线程可能被强制杀死，导致资源没清理。
* **典型场景**：

  * 日志、心跳、监控等**后台守护线程**，结果无关紧要。
  * 临时 fire-and-forget 任务。

---

### 关键区别总结

* **join = 同步等待**，强调主线程必须等；
* **detach = 异步放飞**，强调主线程不管子线程死活；
* 如果既不 join 又不 detach，线程对象析构时会 `std::terminate` 崩溃。

---

### 面试一句话

> `join` 用在需要等待子线程完成的任务，`detach` 用在后台独立运行、不关心结果的任务。

---

要不要我下一步给你抛一个更深入的考点：**多线程里如果子线程抛异常会发生什么？**

---

## 相关笔记
<!-- 自动生成 -->

暂无相关笔记

